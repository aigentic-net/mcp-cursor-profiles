<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 580" font-family="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">
  <defs>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.08"/>
    </filter>
    <linearGradient id="headerBg" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#1e293b"/>
      <stop offset="100%" stop-color="#334155"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="960" height="580" rx="12" fill="#f8fafc"/>

  <!-- Title bar -->
  <rect width="960" height="56" rx="12" fill="url(#headerBg)"/>
  <rect y="44" width="960" height="12" fill="url(#headerBg)"/>
  <text x="480" y="35" text-anchor="middle" fill="#f1f5f9" font-size="18" font-weight="600" letter-spacing="0.5">Architecture Overview</text>

  <!-- MCP Server container -->
  <rect x="24" y="76" width="912" height="200" rx="10" fill="#fff" stroke="#cbd5e1" stroke-width="1" filter="url(#shadow)"/>
  <text x="44" y="100" fill="#475569" font-size="11" font-weight="600" letter-spacing="1.2">MCP CURSOR PROFILES SERVER</text>
  <line x1="44" y1="108" x2="200" y2="108" stroke="#e2e8f0" stroke-width="1"/>

  <!-- Profile tools -->
  <text x="44" y="132" fill="#64748b" font-size="10" font-weight="500" letter-spacing="0.5">PROFILE MANAGEMENT</text>
  <g transform="translate(44, 142)">
    <rect width="120" height="34" rx="6" fill="#1e293b"/>
    <text x="60" y="21" text-anchor="middle" fill="#e2e8f0" font-size="11" font-weight="500">show_profiles</text>
  </g>
  <g transform="translate(176, 142)">
    <rect width="128" height="34" rx="6" fill="#1e293b"/>
    <text x="64" y="21" text-anchor="middle" fill="#e2e8f0" font-size="11" font-weight="500">switch_profile</text>
  </g>
  <g transform="translate(316, 142)">
    <rect width="112" height="34" rx="6" fill="#1e293b"/>
    <text x="56" y="21" text-anchor="middle" fill="#e2e8f0" font-size="11" font-weight="500">init_profile</text>
  </g>
  <g transform="translate(440, 142)">
    <rect width="118" height="34" rx="6" fill="#1e293b"/>
    <text x="59" y="21" text-anchor="middle" fill="#e2e8f0" font-size="11" font-weight="500">open_cursor</text>
  </g>

  <!-- Identity tools -->
  <text x="44" y="206" fill="#64748b" font-size="10" font-weight="500" letter-spacing="0.5">IDENTITY BINDINGS</text>
  <g transform="translate(44, 216)">
    <rect width="120" height="34" rx="6" fill="#0f766e"/>
    <text x="60" y="21" text-anchor="middle" fill="#e2e8f0" font-size="11" font-weight="500">link_identity</text>
  </g>
  <g transform="translate(176, 216)">
    <rect width="132" height="34" rx="6" fill="#0f766e"/>
    <text x="66" y="21" text-anchor="middle" fill="#e2e8f0" font-size="11" font-weight="500">unlink_identity</text>
  </g>

  <!-- Git auth tools -->
  <text x="420" y="206" fill="#64748b" font-size="10" font-weight="500" letter-spacing="0.5">GIT AUTHENTICATION</text>
  <g transform="translate(420, 216)">
    <rect width="136" height="34" rx="6" fill="#334155"/>
    <text x="68" y="21" text-anchor="middle" fill="#e2e8f0" font-size="11" font-weight="500">check_git_auth</text>
  </g>
  <g transform="translate(568, 216)">
    <rect width="130" height="34" rx="6" fill="#334155"/>
    <text x="65" y="21" text-anchor="middle" fill="#e2e8f0" font-size="11" font-weight="500">fix_git_remote</text>
  </g>
  <g transform="translate(710, 216)">
    <rect width="146" height="34" rx="6" fill="#334155"/>
    <text x="73" y="21" text-anchor="middle" fill="#e2e8f0" font-size="11" font-weight="500">list_git_accounts</text>
  </g>

  <!-- Connector lines -->
  <!-- Profile tools to Cursor native profiles -->
  <line x1="240" y1="176" x2="240" y2="320" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="6,4"/>
  <polygon points="236,318 240,328 244,318" fill="#94a3b8"/>
  <!-- Identity tools to identities.json -->
  <line x1="110" y1="250" x2="110" y2="320" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="6,4"/>
  <polygon points="106,318 110,328 114,318" fill="#94a3b8"/>
  <!-- Git tools to gh CLI -->
  <line x1="640" y1="250" x2="640" y2="320" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="6,4"/>
  <polygon points="636,318 640,328 644,318" fill="#94a3b8"/>
  <!-- switch_profile to Cursor IDE (launch) -->
  <line x1="500" y1="176" x2="850" y2="176" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="6,4"/>
  <line x1="850" y1="176" x2="850" y2="320" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="6,4"/>
  <polygon points="846,318 850,328 854,318" fill="#94a3b8"/>

  <!-- Labels on connectors -->
  <text x="250" y="300" fill="#94a3b8" font-size="9" font-weight="500">storage.json</text>
  <text x="52" y="300" fill="#94a3b8" font-size="9" font-weight="500">identities.json</text>
  <text x="646" y="300" fill="#94a3b8" font-size="9" font-weight="500">credentials</text>
  <text x="860" y="260" fill="#94a3b8" font-size="9" font-weight="500">--profile</text>

  <!-- Bottom row -->
  <!-- Cursor Native Profiles -->
  <rect x="24" y="328" width="310" height="230" rx="10" fill="#fff" stroke="#cbd5e1" stroke-width="1" filter="url(#shadow)"/>
  <text x="44" y="352" fill="#475569" font-size="11" font-weight="600" letter-spacing="1.2">CURSOR NATIVE PROFILES</text>
  <line x1="44" y1="360" x2="180" y2="360" stroke="#e2e8f0" stroke-width="1"/>

  <g transform="translate(44, 372)">
    <rect width="270" height="38" rx="6" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
    <text x="14" y="16" fill="#475569" font-size="10" font-weight="600">storage.json</text>
    <text x="14" y="30" fill="#64748b" font-size="10">userDataProfiles + profileAssociations</text>
  </g>

  <g transform="translate(44, 420)">
    <rect width="270" height="38" rx="6" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
    <text x="14" y="16" fill="#475569" font-size="10" font-weight="600">User/profiles/&lt;hash&gt;/</text>
    <text x="14" y="30" fill="#64748b" font-size="10">settings.json, keybindings, snippets</text>
  </g>

  <g transform="translate(44, 468)">
    <rect width="270" height="38" rx="6" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
    <text x="14" y="16" fill="#475569" font-size="10" font-weight="600">CachedProfilesData/&lt;hash&gt;/</text>
    <text x="14" y="30" fill="#64748b" font-size="10">Extension caches per profile</text>
  </g>

  <g transform="translate(44, 516)">
    <rect width="270" height="30" rx="6" fill="#fefce8" stroke="#facc15" stroke-width="1"/>
    <text x="135" y="19" text-anchor="middle" fill="#854d0e" font-size="10" font-weight="500">Visible in Cursor Settings UI</text>
  </g>

  <!-- gh CLI -->
  <rect x="474" y="328" width="220" height="130" rx="10" fill="#fff" stroke="#cbd5e1" stroke-width="1" filter="url(#shadow)"/>
  <text x="584" y="352" text-anchor="middle" fill="#475569" font-size="11" font-weight="600" letter-spacing="1.2">GH CLI</text>
  <line x1="514" y1="360" x2="654" y2="360" stroke="#e2e8f0" stroke-width="1"/>
  <text x="584" y="382" text-anchor="middle" fill="#64748b" font-size="11">Account tokens</text>
  <text x="584" y="400" text-anchor="middle" fill="#64748b" font-size="11">Credential helper</text>
  <text x="584" y="418" text-anchor="middle" fill="#64748b" font-size="11">gh auth switch</text>

  <!-- Cursor IDE -->
  <rect x="774" y="328" width="162" height="130" rx="10" fill="#fff" stroke="#cbd5e1" stroke-width="1" filter="url(#shadow)"/>
  <text x="855" y="352" text-anchor="middle" fill="#475569" font-size="11" font-weight="600" letter-spacing="1.2">CURSOR IDE</text>
  <line x1="804" y1="360" x2="906" y2="360" stroke="#e2e8f0" stroke-width="1"/>
  <text x="855" y="382" text-anchor="middle" fill="#64748b" font-size="11">cursor --profile</text>
  <text x="855" y="400" text-anchor="middle" fill="#64748b" font-size="11">Native profile</text>
  <text x="855" y="418" text-anchor="middle" fill="#64748b" font-size="11">switching</text>

  <!-- Footer -->
  <text x="480" y="572" text-anchor="middle" fill="#94a3b8" font-size="11" letter-spacing="0.3">Profiles are managed natively by Cursor. Identity bindings add automatic git credential switching via MCP.</text>
</svg>
