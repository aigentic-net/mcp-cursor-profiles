<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 480" font-family="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">
  <defs>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.08"/>
    </filter>
    <linearGradient id="headerBg" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#1e293b"/>
      <stop offset="100%" stop-color="#334155"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="720" height="480" rx="12" fill="#f8fafc"/>

  <!-- Title bar -->
  <rect width="720" height="56" rx="12" fill="url(#headerBg)"/>
  <rect y="44" width="720" height="12" fill="url(#headerBg)"/>
  <text x="360" y="32" text-anchor="middle" fill="#f1f5f9" font-size="17" font-weight="600" letter-spacing="0.5">switch_profile</text>
  <text x="360" y="48" text-anchor="middle" fill="#94a3b8" font-size="10" letter-spacing="0.3">Workflow</text>

  <!-- Step 1: Verify profile exists -->
  <g transform="translate(40, 80)">
    <rect width="640" height="52" rx="8" fill="#fff" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow)"/>
    <rect width="40" height="52" rx="8" fill="#1e293b"/>
    <rect x="8" width="32" height="52" fill="#1e293b"/>
    <text x="20" y="31" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="700">1</text>
    <text x="60" y="25" fill="#1e293b" font-size="13" font-weight="600">Verify profile exists</text>
    <text x="60" y="42" fill="#64748b" font-size="11">Check storage.json userDataProfiles for the named profile</text>
  </g>

  <!-- Error branch -->
  <rect x="610" y="94" width="80" height="24" rx="4" fill="#fef2f2" stroke="#fca5a5" stroke-width="1"/>
  <text x="650" y="110" text-anchor="middle" fill="#dc2626" font-size="10" font-weight="600">NOT FOUND</text>

  <!-- Connector -->
  <line x1="360" y1="132" x2="360" y2="148" stroke="#cbd5e1" stroke-width="1.5"/>
  <polygon points="356,146 360,156 364,146" fill="#cbd5e1"/>

  <!-- Step 2: Check identity binding -->
  <g transform="translate(40, 156)">
    <rect width="640" height="52" rx="8" fill="#fff" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow)"/>
    <rect width="40" height="52" rx="8" fill="#0f766e"/>
    <rect x="8" width="32" height="52" fill="#0f766e"/>
    <text x="20" y="31" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="700">2</text>
    <text x="60" y="25" fill="#1e293b" font-size="13" font-weight="600">Check identity binding</text>
    <text x="60" y="42" fill="#64748b" font-size="11">Look up profile in identities.json for a linked GitHub account</text>
  </g>

  <!-- Optional badge -->
  <rect x="586" y="170" width="100" height="24" rx="4" fill="#f0fdfa" stroke="#5eead4" stroke-width="1"/>
  <text x="636" y="186" text-anchor="middle" fill="#0f766e" font-size="10" font-weight="600">IF LINKED</text>

  <!-- Connector -->
  <line x1="360" y1="208" x2="360" y2="224" stroke="#cbd5e1" stroke-width="1.5"/>
  <polygon points="356,222 360,232 364,222" fill="#cbd5e1"/>

  <!-- Step 3: Switch gh account -->
  <g transform="translate(40, 232)">
    <rect width="640" height="52" rx="8" fill="#fff" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow)"/>
    <rect width="40" height="52" rx="8" fill="#0f766e"/>
    <rect x="8" width="32" height="52" fill="#0f766e"/>
    <text x="20" y="31" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="700">3</text>
    <text x="60" y="25" fill="#1e293b" font-size="13" font-weight="600">Switch GitHub account</text>
    <text x="60" y="42" fill="#64748b" font-size="11">Run gh auth switch to activate the linked account (skipped if no binding)</text>
  </g>

  <!-- Connector -->
  <line x1="360" y1="284" x2="360" y2="300" stroke="#cbd5e1" stroke-width="1.5"/>
  <polygon points="356,298 360,308 364,298" fill="#cbd5e1"/>

  <!-- Step 4: Launch Cursor with profile -->
  <g transform="translate(40, 308)">
    <rect width="640" height="52" rx="8" fill="#fff" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow)"/>
    <rect width="40" height="52" rx="8" fill="#1e293b"/>
    <rect x="8" width="32" height="52" fill="#1e293b"/>
    <text x="20" y="31" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="700">4</text>
    <text x="60" y="25" fill="#1e293b" font-size="13" font-weight="600">Launch Cursor with profile</text>
    <text x="60" y="42" fill="#64748b" font-size="11">cursor --profile "profile_name" &#8212; Cursor loads the native profile natively</text>
  </g>

  <!-- Success -->
  <line x1="360" y1="360" x2="360" y2="376" stroke="#cbd5e1" stroke-width="1.5"/>
  <polygon points="356,374 360,384 364,374" fill="#cbd5e1"/>

  <g transform="translate(120, 390)">
    <rect width="480" height="40" rx="6" fill="#f0fdf4" stroke="#86efac" stroke-width="1"/>
    <text x="240" y="18" text-anchor="middle" fill="#16a34a" font-size="12" font-weight="600">Profile switched + git identity activated</text>
    <text x="240" y="33" text-anchor="middle" fill="#16a34a" font-size="10">Settings, extensions, and credentials all match the new context</text>
  </g>

  <!-- Footer note -->
  <text x="360" y="460" text-anchor="middle" fill="#94a3b8" font-size="10" letter-spacing="0.3">No symlinks, no restarts needed &#8212; Cursor's native --profile flag handles the switch</text>
</svg>
