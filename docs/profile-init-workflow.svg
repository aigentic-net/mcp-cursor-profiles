<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 480" font-family="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">
  <defs>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.08"/>
    </filter>
    <linearGradient id="headerBg" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#1e293b"/>
      <stop offset="100%" stop-color="#334155"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="720" height="480" rx="12" fill="#f8fafc"/>

  <!-- Title bar -->
  <rect width="720" height="56" rx="12" fill="url(#headerBg)"/>
  <rect y="44" width="720" height="12" fill="url(#headerBg)"/>
  <text x="360" y="32" text-anchor="middle" fill="#f1f5f9" font-size="17" font-weight="600" letter-spacing="0.5">init_profile</text>
  <text x="360" y="48" text-anchor="middle" fill="#94a3b8" font-size="10" letter-spacing="0.3">Workflow</text>

  <!-- Step 1: Validate name -->
  <g transform="translate(40, 80)">
    <rect width="640" height="52" rx="8" fill="#fff" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow)"/>
    <rect width="40" height="52" rx="8" fill="#1e293b"/>
    <rect x="8" width="32" height="52" fill="#1e293b"/>
    <text x="20" y="31" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="700">1</text>
    <text x="60" y="25" fill="#1e293b" font-size="13" font-weight="600">Validate profile name</text>
    <text x="60" y="42" fill="#64748b" font-size="11">Must start with a letter or digit. Allows spaces, hyphens, underscores, dots.</text>
  </g>

  <!-- Connector -->
  <line x1="360" y1="132" x2="360" y2="148" stroke="#cbd5e1" stroke-width="1.5"/>
  <polygon points="356,146 360,156 364,146" fill="#cbd5e1"/>

  <!-- Step 2: Check uniqueness -->
  <g transform="translate(40, 156)">
    <rect width="640" height="52" rx="8" fill="#fff" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow)"/>
    <rect width="40" height="52" rx="8" fill="#1e293b"/>
    <rect x="8" width="32" height="52" fill="#1e293b"/>
    <text x="20" y="31" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="700">2</text>
    <text x="60" y="25" fill="#1e293b" font-size="13" font-weight="600">Check profile doesn't already exist</text>
    <text x="60" y="42" fill="#64748b" font-size="11">Query storage.json userDataProfiles to prevent duplicate names</text>
  </g>

  <!-- Error branch -->
  <rect x="600" y="170" width="90" height="24" rx="4" fill="#fef2f2" stroke="#fca5a5" stroke-width="1"/>
  <text x="645" y="186" text-anchor="middle" fill="#dc2626" font-size="10" font-weight="600">EXISTS</text>

  <!-- Connector -->
  <line x1="360" y1="208" x2="360" y2="224" stroke="#cbd5e1" stroke-width="1.5"/>
  <polygon points="356,222 360,232 364,222" fill="#cbd5e1"/>

  <!-- Step 3: Link identity (optional) -->
  <g transform="translate(40, 232)">
    <rect width="640" height="52" rx="8" fill="#fff" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow)"/>
    <rect width="40" height="52" rx="8" fill="#0f766e"/>
    <rect x="8" width="32" height="52" fill="#0f766e"/>
    <text x="20" y="31" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="700">3</text>
    <text x="60" y="25" fill="#1e293b" font-size="13" font-weight="600">Link GitHub identity (optional)</text>
    <text x="60" y="42" fill="#64748b" font-size="11">If github_username provided, save to identities.json for auto-switching</text>
  </g>

  <!-- Optional badge -->
  <rect x="586" y="246" width="100" height="24" rx="4" fill="#f0fdfa" stroke="#5eead4" stroke-width="1"/>
  <text x="636" y="262" text-anchor="middle" fill="#0f766e" font-size="10" font-weight="600">OPTIONAL</text>

  <!-- Connector -->
  <line x1="360" y1="284" x2="360" y2="300" stroke="#cbd5e1" stroke-width="1.5"/>
  <polygon points="356,298 360,308 364,298" fill="#cbd5e1"/>

  <!-- Step 4: Create via Cursor CLI -->
  <g transform="translate(40, 308)">
    <rect width="640" height="52" rx="8" fill="#fff" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow)"/>
    <rect width="40" height="52" rx="8" fill="#1e293b"/>
    <rect x="8" width="32" height="52" fill="#1e293b"/>
    <text x="20" y="31" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="700">4</text>
    <text x="60" y="25" fill="#1e293b" font-size="13" font-weight="600">Create profile via Cursor CLI</text>
    <text x="60" y="42" fill="#64748b" font-size="11">cursor --profile "name" &#8212; Cursor auto-creates the profile and opens with it</text>
  </g>

  <!-- Success -->
  <line x1="360" y1="360" x2="360" y2="376" stroke="#cbd5e1" stroke-width="1.5"/>
  <polygon points="356,374 360,384 364,374" fill="#cbd5e1"/>

  <g transform="translate(120, 390)">
    <rect width="480" height="40" rx="6" fill="#f0fdf4" stroke="#86efac" stroke-width="1"/>
    <text x="240" y="18" text-anchor="middle" fill="#16a34a" font-size="12" font-weight="600">Profile created + Cursor opened</text>
    <text x="240" y="33" text-anchor="middle" fill="#16a34a" font-size="10">Visible in Cursor Settings UI, with optional git identity binding</text>
  </g>

  <!-- Footer note -->
  <text x="360" y="460" text-anchor="middle" fill="#94a3b8" font-size="10" letter-spacing="0.3">Cursor natively creates the profile directory structure &#8212; no manual file copying needed</text>
</svg>
